{% extends "base.html.twig" %}

{% block title %}Questions{% endblock %}

{% block body %}
<div class="questions">
  {# 1 question/page via KnpPaginator #}
  {% for question in questions %}
    <h5 class="mb-3">
      Question {{ questionNumber }} — {{ question.enonce }}
    </h5>

    {# Formulaire: submit => enregistre puis redirige #}
    {{ form_start(formReponse) }}
      {{ form_errors(formReponse) }}

      {% for child in formReponse.reponse %}
        <div class="form-check mb-2">
          {{ form_widget(child, { attr: { class: 'form-check-input' } }) }}
          {{ form_label(child, null, { label_attr: { class: 'form-check-label ms-2 mb-0' } }) }}
          {{ form_errors(child) }}
        </div>
      {% endfor %}

      <div class="mt-4">
        <button type="submit" class="btn btn-outline-turquoise btn-sm">
          {% if estDernierrePage %}
            Valider la réponse et soumettre le quiz
          {% else %}
            Valider la réponse
          {% endif %}
        </button>
      </div>
    {{ form_end(formReponse) }}
  {% endfor %}

</div>

<div class="navigation mt-4">
  {{ knp_pagination_render(
    questions,
    '@KnpPaginator/Pagination/bootstrap_v5_pagination.html.twig',
    {},
    { show_numbers: false }
  ) }}
</div>
{% endblock %}
